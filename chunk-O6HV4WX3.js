var O={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var k=class{constructor(n){this.code_=n.code,this.units_=n.units,this.extent_=n.extent!==void 0?n.extent:null,this.worldExtent_=n.worldExtent!==void 0?n.worldExtent:null,this.axisOrientation_=n.axisOrientation!==void 0?n.axisOrientation:"enu",this.global_=n.global!==void 0?n.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=n.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=n.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||O[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(n){this.global_=n,this.canWrapX_=!!(n&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(n){this.defaultTileGrid_=n}setExtent(n){this.extent_=n,this.canWrapX_=!!(this.global_&&n)}setWorldExtent(n){this.worldExtent_=n}setGetPointResolution(n){this.getPointResolutionFunc_=n}getPointResolutionFunc(){return this.getPointResolutionFunc_}},W=k;var G=6378137,Y=Math.PI*G,vt=[-Y,-Y,Y,Y],Vt=[-180,-85,180,85],q=G*Math.log(Math.tan(Math.PI/2)),T=class extends W{constructor(n){super({code:n,units:"m",extent:vt,global:!0,worldExtent:Vt,getPointResolution:function(r,e){return r/Math.cosh(e[1]/G)}})}},J=[new T("EPSG:3857"),new T("EPSG:102100"),new T("EPSG:102113"),new T("EPSG:900913"),new T("http://www.opengis.net/def/crs/EPSG/0/3857"),new T("http://www.opengis.net/gml/srs/epsg.xml#3857")];function mt(t,n,r){let e=t.length;r=r>1?r:2,n===void 0&&(r>2?n=t.slice():n=new Array(e));for(let i=0;i<e;i+=r){n[i]=Y*t[i]/180;let o=G*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>q?o=q:o<-q&&(o=-q),n[i+1]=o}return n}function pt(t,n,r){let e=t.length;r=r>1?r:2,n===void 0&&(r>2?n=t.slice():n=new Array(e));for(let i=0;i<e;i+=r)n[i]=180*t[i]/Y,n[i+1]=360*Math.atan(Math.exp(t[i+1]/G))/Math.PI-90;return n}var kt=6378137,dt=[-180,-90,180,90],Jt=Math.PI*kt/180,S=class extends W{constructor(n,r){super({code:n,units:"degrees",extent:dt,axisOrientation:r,global:!0,metersPerUnit:Jt,worldExtent:dt})}},K=[new S("CRS:84"),new S("EPSG:4326","neu"),new S("urn:ogc:def:crs:OGC:1.3:CRS84"),new S("urn:ogc:def:crs:OGC:2:84"),new S("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new S("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new S("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var j={};function xt(t){return j[t]||j[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Et(t,n){j[t]=n}function Xn(t){for(let n in t)delete t[n]}function Rn(t){let n;for(n in t)return!1;return!n}var C={};function X(t,n,r){let e=t.getCode(),i=n.getCode();e in C||(C[e]={}),C[e][i]=r}function Mt(t,n){let r;return t in C&&n in C[t]&&(r=C[t][n]),r}var g={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function An(t){let n=D();for(let r=0,e=t.length;r<e;++r)$t(n,t[r]);return n}function Kt(t,n,r){let e=Math.min.apply(null,t),i=Math.min.apply(null,n),o=Math.max.apply(null,t),s=Math.max.apply(null,n);return F(e,i,o,s,r)}function In(t,n,r){return r?(r[0]=t[0]-n,r[1]=t[1]-n,r[2]=t[2]+n,r[3]=t[3]+n,r):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function Un(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function On(t,n,r){let e,i;return n<t[0]?e=t[0]-n:t[2]<n?e=n-t[2]:e=0,r<t[1]?i=t[1]-r:t[3]<r?i=r-t[3]:i=0,e*e+i*i}function Gn(t,n){return jt(t,n[0],n[1])}function _t(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function jt(t,n,r){return t[0]<=n&&n<=t[2]&&t[1]<=r&&r<=t[3]}function St(t,n){let r=t[0],e=t[1],i=t[2],o=t[3],s=n[0],u=n[1],f=g.UNKNOWN;return s<r?f=f|g.LEFT:s>i&&(f=f|g.RIGHT),u<e?f=f|g.BELOW:u>o&&(f=f|g.ABOVE),f===g.UNKNOWN&&(f=g.INTERSECTING),f}function D(){return[1/0,1/0,-1/0,-1/0]}function F(t,n,r,e,i){return i?(i[0]=t,i[1]=n,i[2]=r,i[3]=e,i):[t,n,r,e]}function $(t){return F(1/0,1/0,-1/0,-1/0,t)}function bn(t,n){let r=t[0],e=t[1];return F(r,e,r,e,n)}function Nn(t,n,r,e,i){let o=$(i);return Q(o,t,n,r,e)}function zn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function Zn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function $t(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function Q(t,n,r,e,i){for(;r<e;r+=i)Qt(t,n[r],n[r+1]);return t}function Qt(t,n,r){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],r)}function Tt(t,n){let r;return r=n(Pt(t)),r||(r=n(wt(t)),r)||(r=n(Xt(t)),r)||(r=n(B(t)),r)?r:!1}function Ln(t){let n=0;return Rt(t)||(n=E(t)*rn(t)),n}function Pt(t){return[t[0],t[1]]}function wt(t){return[t[2],t[1]]}function tn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Wn(t,n){let r;if(n==="bottom-left")r=Pt(t);else if(n==="bottom-right")r=wt(t);else if(n==="top-left")r=B(t);else if(n==="top-right")r=Xt(t);else throw new Error("Invalid corner");return r}function qn(t,n,r,e,i){let[o,s,u,f,c,l,a,h]=nn(t,n,r,e);return F(Math.min(o,u,c,a),Math.min(s,f,l,h),Math.max(o,u,c,a),Math.max(s,f,l,h),i)}function nn(t,n,r,e){let i=n*e[0]/2,o=n*e[1]/2,s=Math.cos(r),u=Math.sin(r),f=i*s,c=i*u,l=o*s,a=o*u,h=t[0],p=t[1];return[h-f+a,p-c-l,h-f-a,p-c+l,h+f-a,p+c+l,h+f+a,p+c-l,h-f+a,p-c-l]}function rn(t){return t[3]-t[1]}function Dn(t,n,r){let e=r||D();return tt(t,n)?(t[0]>n[0]?e[0]=t[0]:e[0]=n[0],t[1]>n[1]?e[1]=t[1]:e[1]=n[1],t[2]<n[2]?e[2]=t[2]:e[2]=n[2],t[3]<n[3]?e[3]=t[3]:e[3]=n[3]):$(e),e}function B(t){return[t[0],t[3]]}function Xt(t){return[t[2],t[3]]}function E(t){return t[2]-t[0]}function tt(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function Rt(t){return t[2]<t[0]||t[3]<t[1]}function Bn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function yt(t,n,r){let e=!1,i=St(t,n),o=St(t,r);if(i===g.INTERSECTING||o===g.INTERSECTING)e=!0;else{let s=t[0],u=t[1],f=t[2],c=t[3],l=n[0],a=n[1],h=r[0],p=r[1],y=(p-a)/(h-l),_,M;o&g.ABOVE&&!(i&g.ABOVE)&&(_=h-(p-c)/y,e=_>=s&&_<=f),!e&&o&g.RIGHT&&!(i&g.RIGHT)&&(M=p-(h-f)*y,e=M>=u&&M<=c),!e&&o&g.BELOW&&!(i&g.BELOW)&&(_=h-(p-u)/y,e=_>=s&&_<=f),!e&&o&g.LEFT&&!(i&g.LEFT)&&(M=p-(h-s)*y,e=M>=u&&M<=c)}return e}function Yt(t,n,r,e){if(Rt(t))return $(r);let i=[];if(e>1){let u=t[2]-t[0],f=t[3]-t[1];for(let c=0;c<e;++c)i.push(t[0]+u*c/e,t[1],t[2],t[1]+f*c/e,t[2]-u*c/e,t[3],t[0],t[3]-f*c/e)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(i,i,2);let o=[],s=[];for(let u=0,f=i.length;u<f;u+=2)o.push(i[u]),s.push(i[u+1]);return Kt(o,s,r)}function en(t,n){let r=n.getExtent(),e=tn(t);if(n.canWrapX()&&(e[0]<r[0]||e[0]>=r[2])){let i=E(r),s=Math.floor((e[0]-r[0])/i)*i;t[0]-=s,t[2]-=s}return t}function Hn(t,n,r){if(n.canWrapX()){let e=n.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[e[0],t[1],e[2],t[3]]];en(t,n);let i=E(e);if(E(t)>i&&!r)return[[e[0],t[1],e[2],t[3]]];if(t[0]<e[0])return[[t[0]+i,t[1],e[2],t[3]],[e[0],t[1],t[2],t[3]]];if(t[2]>e[2])return[[t[0],t[1],e[2],t[3]],[e[0],t[1],t[2]-i,t[3]]]}return[t]}function b(t,n,r){return Math.min(Math.max(t,n),r)}function Vn(t,n,r,e,i,o){let s=i-r,u=o-e;if(s!==0||u!==0){let f=((t-r)*s+(n-e)*u)/(s*s+u*u);f>1?(r=i,e=o):f>0&&(r+=s*f,e+=u*f)}return on(t,n,r,e)}function on(t,n,r,e){let i=r-t,o=e-n;return i*i+o*o}function kn(t){let n=t.length;for(let e=0;e<n;e++){let i=e,o=Math.abs(t[e][e]);for(let u=e+1;u<n;u++){let f=Math.abs(t[u][e]);f>o&&(o=f,i=u)}if(o===0)return null;let s=t[i];t[i]=t[e],t[e]=s;for(let u=e+1;u<n;u++){let f=-t[u][e]/t[e][e];for(let c=e;c<n+1;c++)e==c?t[u][c]=0:t[u][c]+=f*t[e][c]}}let r=new Array(n);for(let e=n-1;e>=0;e--){r[e]=t[e][n]/t[e][e];for(let i=e-1;i>=0;i--)t[i][n]-=t[i][e]*r[e]}return r}function H(t){return t*Math.PI/180}function sn(t,n){let r=t%n;return r*n<0?r+n:r}function Jn(t,n,r){return t+r*(n-t)}function nt(t,n){let r=Math.pow(10,n);return Math.round(t*r)/r}function Kn(t,n){return Math.round(nt(t,n))}function N(t,n){return Math.floor(nt(t,n))}function z(t,n){return Math.ceil(nt(t,n))}function $n(t,n){let r=(""+t).split("."),e=(""+n).split(".");for(let i=0;i<Math.max(r.length,e.length);i++){let o=parseInt(r[i]||"0",10),s=parseInt(e[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function nr(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Ct(t,n){let r=!0;for(let e=t.length-1;e>=0;--e)if(t[e]!=n[e]){r=!1;break}return r}function rr(t,n){let r=Math.cos(n),e=Math.sin(n),i=t[0]*r-t[1]*e,o=t[1]*r+t[0]*e;return t[0]=i,t[1]=o,t}function er(t,n){return t[0]*=n,t[1]*=n,t}function ir(t,n){if(n.canWrapX()){let r=E(n.getExtent()),e=rt(t,n,r);e&&(t[0]-=e*r)}return t}function rt(t,n,r){let e=n.getExtent(),i=0;return n.canWrapX()&&(t[0]<e[0]||t[0]>e[2])&&(r=r||E(e),i=Math.floor((t[0]-e[0])/r)),i}var un=63710088e-1;function et(t,n,r){r=r||un;let e=H(t[1]),i=H(n[1]),o=(i-e)/2,s=H(n[0]-t[0])/2,u=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(e)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}var Ft={info:1,warn:2,error:3,none:4},fn=Ft.info;function At(...t){fn>Ft.warn||console.warn(...t)}var it=!0;function cn(t){it=!(t===void 0?!0:t)}function ot(t,n){if(n!==void 0){for(let r=0,e=t.length;r<e;++r)n[r]=t[r];n=n}else n=t.slice();return n}function Ot(t,n){if(n!==void 0&&t!==n){for(let r=0,e=t.length;r<e;++r)n[r]=t[r];t=n}return t}function ln(t){Et(t.getCode(),t),X(t,t,ot)}function an(t){t.forEach(ln)}function d(t){return typeof t=="string"?xt(t):t||null}function Tr(t,n,r,e){t=d(t);let i,o=t.getPointResolutionFunc();if(o){if(i=o(n,r),e&&e!==t.getUnits()){let s=t.getMetersPerUnit();s&&(i=i*s/O[e])}}else{let s=t.getUnits();if(s=="degrees"&&!e||e=="degrees")i=n;else{let u=st(t,d("EPSG:4326"));if(u===Ot&&s!=="degrees")i=n*t.getMetersPerUnit();else{let c=[r[0]-n/2,r[1],r[0]+n/2,r[1],r[0],r[1]-n/2,r[0],r[1]+n/2];c=u(c,c,2);let l=et(c.slice(0,2),c.slice(2,4)),a=et(c.slice(4,6),c.slice(6,8));i=(l+a)/2}let f=e?O[e]:t.getMetersPerUnit();f!==void 0&&(i/=f)}}return i}function It(t){an(t),t.forEach(function(n){t.forEach(function(r){n!==r&&X(n,r,ot)})})}function hn(t,n,r,e){t.forEach(function(i){n.forEach(function(o){X(i,o,r),X(o,i,e)})})}function Pr(t,n){return t?typeof t=="string"?d(t):t:d(n)}function Ut(t){return function(n,r,e){let i=n.length;e=e!==void 0?e:2,r=r!==void 0?r:new Array(i);for(let o=0;o<i;o+=e){let s=t(n.slice(o,o+e)),u=s.length;for(let f=0,c=e;f<c;++f)r[o+f]=f>=u?n[o+f]:s[f]}return r}}function wr(t,n,r,e){let i=d(t),o=d(n);X(i,o,Ut(r)),X(o,i,Ut(e))}function Xr(t,n){return cn(),ut(t,"EPSG:4326",n!==void 0?n:"EPSG:3857")}function Rr(t,n){if(t===n)return!0;let r=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||st(t,n)===ot)&&r}function st(t,n){let r=t.getCode(),e=n.getCode(),i=Mt(r,e);return i||(i=Ot),i}function Gt(t,n){let r=d(t),e=d(n);return st(r,e)}function ut(t,n,r){return Gt(n,r)(t,void 0,t.length)}function bt(t,n,r,e){let i=Gt(n,r);return Yt(t,i,void 0,e)}var x=null;function yr(){return x}function Yr(t,n){return x?ut(t,n,x):t}function Cr(t,n){return x?ut(t,x,n):(it&&!Ct(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(it=!1,At("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Fr(t,n){return x?bt(t,n,x):t}function Ar(t,n){return x?bt(t,x,n):t}function Ir(t,n){if(!x)return t;let r=d(n).getMetersPerUnit(),e=x.getMetersPerUnit();return r&&e?t*r/e:t}function Ur(t,n,r){return function(e){let i,o;if(t.canWrapX()){let s=t.getExtent(),u=E(s);e=e.slice(0),o=rt(e,t,u),o&&(e[0]=e[0]-o*u),e[0]=b(e[0],s[0],s[2]),e[1]=b(e[1],s[1],s[3]),i=r(e)}else i=r(e);return o&&n.canWrapX()&&(i[0]+=o*E(n.getExtent())),i}}function gn(){It(J),It(K),hn(K,J,mt,pt)}gn();var v=class{constructor(n,r,e,i){this.minX=n,this.maxX=r,this.minY=e,this.maxY=i}contains(n){return this.containsXY(n[1],n[2])}containsTileRange(n){return this.minX<=n.minX&&n.maxX<=this.maxX&&this.minY<=n.minY&&n.maxY<=this.maxY}containsXY(n,r){return this.minX<=n&&n<=this.maxX&&this.minY<=r&&r<=this.maxY}equals(n){return this.minX==n.minX&&this.minY==n.minY&&this.maxX==n.maxX&&this.maxY==n.maxY}extend(n){n.minX<this.minX&&(this.minX=n.minX),n.maxX>this.maxX&&(this.maxX=n.maxX),n.minY<this.minY&&(this.minY=n.minY),n.maxY>this.maxY&&(this.maxY=n.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(n){return this.minX<=n.maxX&&this.maxX>=n.minX&&this.minY<=n.maxY&&this.maxY>=n.minY}};function R(t,n,r,e,i){return i!==void 0?(i.minX=t,i.maxX=n,i.minY=r,i.maxY=e,i):new v(t,n,r,e)}var Nt=v;function A(t,n){if(!t)throw new Error(n)}function ft(t,n,r,e){return e!==void 0?(e[0]=t,e[1]=n,e[2]=r,e):[t,n,r]}function mn(t,n,r){return t+"/"+n+"/"+r}function Nr(t){return mn(t[0],t[1],t[2])}function zr(t){return t.split("/").map(Number)}function Zr(t){return(t[1]<<t[0])+t[2]}function Lr(t,n){let r=t[0],e=t[1],i=t[2];if(n.getMinZoom()>r||r>n.getMaxZoom())return!1;let o=n.getFullTileRange(r);return o?o.containsXY(e,i):!0}function zt(t,n,r,e,i){let o;for(n+=e;n<r;n+=e)if(o=i(t.slice(n-e,n),t.slice(n,n+e)),o)return o;return!1}function Zt(t,n,r,e,i){return!Tt(i,function(s){return!P(t,n,r,e,s[0],s[1])})}function P(t,n,r,e,i,o){let s=0,u=t[r-e],f=t[r-e+1];for(;n<r;n+=e){let c=t[n],l=t[n+1];f<=o?l>o&&(c-u)*(o-f)-(i-u)*(l-f)>0&&s++:l<=o&&(c-u)*(o-f)-(i-u)*(l-f)<0&&s--,u=c,f=l}return s!==0}function pn(t,n,r,e,i,o){if(r.length===0||!P(t,n,r[0],e,i,o))return!1;for(let s=1,u=r.length;s<u;++s)if(P(t,r[s-1],r[s],e,i,o))return!1;return!0}function Br(t,n,r,e,i,o){if(r.length===0)return!1;for(let s=0,u=r.length;s<u;++s){let f=r[s];if(pn(t,n,f,e,i,o))return!0;n=f[f.length-1]}return!1}function ct(t,n,r,e,i){let o=Q(D(),t,n,r,e);return tt(i,o)?_t(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:zt(t,n,r,e,function(s,u){return yt(i,s,u)}):!1}function Jr(t,n,r,e,i){for(let o=0,s=r.length;o<s;++o){if(ct(t,n,r[o],e,i))return!0;n=r[o]}return!1}function lt(t,n,r,e,i){return!!(ct(t,n,r,e,i)||P(t,n,r,e,i[0],i[1])||P(t,n,r,e,i[0],i[3])||P(t,n,r,e,i[2],i[1])||P(t,n,r,e,i[2],i[3]))}function dn(t,n,r,e,i){if(!lt(t,n,r[0],e,i))return!1;if(r.length===1)return!0;for(let o=1,s=r.length;o<s;++o)if(Zt(t,r[o-1],r[o],e,i)&&!ct(t,r[o-1],r[o],e,i))return!1;return!0}function Kr(t,n,r,e,i){for(let o=0,s=r.length;o<s;++o){let u=r[o];if(dn(t,n,u,e,i))return!0;n=u[u.length-1]}return!1}function $r(t,n,r){let e,i;r=r||Lt;let o=0,s=t.length,u=!1;for(;o<s;)e=o+(s-o>>1),i=+r(t[e],n),i<0?o=e+1:(s=e,u=!i);return u?o:~o}function Lt(t,n){return t>n?1:t<n?-1:0}function Wt(t,n,r){if(t[0]<=n)return 0;let e=t.length;if(n<=t[e-1])return e-1;if(typeof r=="function"){for(let i=1;i<e;++i){let o=t[i];if(o===n)return i;if(o<n)return r(n,t[i-1],o)>0?i-1:i}return e-1}if(r>0){for(let i=1;i<e;++i)if(t[i]<n)return i-1;return e-1}if(r<0){for(let i=1;i<e;++i)if(t[i]<=n)return i;return e-1}for(let i=1;i<e;++i){if(t[i]==n)return i;if(t[i]<n)return t[i-1]-n<n-t[i]?i-1:i}return e-1}function Qr(t,n,r){for(;n<r;){let e=t[n];t[n]=t[r],t[r]=e,++n,--r}}function te(t,n){let r=Array.isArray(n)?n:[n],e=r.length;for(let i=0;i<e;i++)t[t.length]=r[i]}function ne(t,n){let r=t.length;if(r!==n.length)return!1;for(let e=0;e<r;e++)if(t[e]!==n[e])return!1;return!0}function qt(t,n,r){let e=n||Lt;return t.every(function(i,o){if(o===0)return!0;let s=e(t[o-1],i);return!(s>0||r&&s===0)})}function ee(t){return t[0]>0&&t[1]>0}function ie(t,n,r){return r===void 0&&(r=[0,0]),r[0]=t[0]*n+.5|0,r[1]=t[1]*n+.5|0,r}function Z(t,n){return Array.isArray(t)?t:(n===void 0?n=[t,t]:(n[0]=t,n[1]=t),n)}var I=[0,0,0],w=5,at=class{constructor(n){this.minZoom=n.minZoom!==void 0?n.minZoom:0,this.resolutions_=n.resolutions,A(qt(this.resolutions_,(i,o)=>o-i,!0),"`resolutions` must be sorted in descending order");let r;if(!n.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!r)r=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=n.origin!==void 0?n.origin:null,this.origins_=null,n.origins!==void 0&&(this.origins_=n.origins,A(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let e=n.extent;e!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=B(e)),A(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,n.tileSizes!==void 0&&(this.tileSizes_=n.tileSizes,A(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=n.tileSize!==void 0?n.tileSize:this.tileSizes_?null:256,A(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=e!==void 0?e:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],n.sizes!==void 0?this.fullTileRanges_=n.sizes.map((i,o)=>{let s=new Nt(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(e){let u=this.getTileRangeForExtentAndZ(e,o);s.minX=Math.max(u.minX,s.minX),s.maxX=Math.min(u.maxX,s.maxX),s.minY=Math.max(u.minY,s.minY),s.maxY=Math.min(u.maxY,s.maxY)}return s}):e&&this.calculateTileRanges_(e)}forEachTileCoord(n,r,e){let i=this.getTileRangeForExtentAndZ(n,r);for(let o=i.minX,s=i.maxX;o<=s;++o)for(let u=i.minY,f=i.maxY;u<=f;++u)e([r,o,u])}forEachTileCoordParentTileRange(n,r,e,i){let o,s,u,f=null,c=n[0]-1;for(this.zoomFactor_===2?(s=n[1],u=n[2]):f=this.getTileCoordExtent(n,i);c>=this.minZoom;){if(s!==void 0&&u!==void 0?(s=Math.floor(s/2),u=Math.floor(u/2),o=R(s,s,u,u,e)):o=this.getTileRangeForExtentAndZ(f,c,e),r(c,o))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(n){return this.origin_?this.origin_:this.origins_[n]}getResolution(n){return this.resolutions_[n]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(n,r,e){if(n[0]<this.maxZoom){if(this.zoomFactor_===2){let o=n[1]*2,s=n[2]*2;return R(o,o+1,s,s+1,r)}let i=this.getTileCoordExtent(n,e||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,n[0]+1,r)}return null}getTileRangeForTileCoordAndZ(n,r,e){if(r>this.maxZoom||r<this.minZoom)return null;let i=n[0],o=n[1],s=n[2];if(r===i)return R(o,s,o,s,e);if(this.zoomFactor_){let f=Math.pow(this.zoomFactor_,r-i),c=Math.floor(o*f),l=Math.floor(s*f);if(r<i)return R(c,c,l,l,e);let a=Math.floor(f*(o+1))-1,h=Math.floor(f*(s+1))-1;return R(c,a,l,h,e)}let u=this.getTileCoordExtent(n,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,r,e)}getTileRangeForExtentAndZ(n,r,e){this.getTileCoordForXYAndZ_(n[0],n[3],r,!1,I);let i=I[1],o=I[2];this.getTileCoordForXYAndZ_(n[2],n[1],r,!0,I);let s=I[1],u=I[2];return R(i,s,o,u,e)}getTileCoordCenter(n){let r=this.getOrigin(n[0]),e=this.getResolution(n[0]),i=Z(this.getTileSize(n[0]),this.tmpSize_);return[r[0]+(n[1]+.5)*i[0]*e,r[1]-(n[2]+.5)*i[1]*e]}getTileCoordExtent(n,r){let e=this.getOrigin(n[0]),i=this.getResolution(n[0]),o=Z(this.getTileSize(n[0]),this.tmpSize_),s=e[0]+n[1]*o[0]*i,u=e[1]-(n[2]+1)*o[1]*i,f=s+o[0]*i,c=u+o[1]*i;return F(s,u,f,c,r)}getTileCoordForCoordAndResolution(n,r,e){return this.getTileCoordForXYAndResolution_(n[0],n[1],r,!1,e)}getTileCoordForXYAndResolution_(n,r,e,i,o){let s=this.getZForResolution(e),u=e/this.getResolution(s),f=this.getOrigin(s),c=Z(this.getTileSize(s),this.tmpSize_),l=u*(n-f[0])/e/c[0],a=u*(f[1]-r)/e/c[1];return i?(l=z(l,w)-1,a=z(a,w)-1):(l=N(l,w),a=N(a,w)),ft(s,l,a,o)}getTileCoordForXYAndZ_(n,r,e,i,o){let s=this.getOrigin(e),u=this.getResolution(e),f=Z(this.getTileSize(e),this.tmpSize_),c=(n-s[0])/u/f[0],l=(s[1]-r)/u/f[1];return i?(c=z(c,w)-1,l=z(l,w)-1):(c=N(c,w),l=N(l,w)),ft(e,c,l,o)}getTileCoordForCoordAndZ(n,r,e){return this.getTileCoordForXYAndZ_(n[0],n[1],r,!1,e)}getTileCoordResolution(n){return this.resolutions_[n[0]]}getTileSize(n){return this.tileSize_?this.tileSize_:this.tileSizes_[n]}getFullTileRange(n){return this.fullTileRanges_?this.fullTileRanges_[n]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,n):null}getZForResolution(n,r){let e=Wt(this.resolutions_,n,r||0);return b(e,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(n,r){return lt(r,0,r.length,2,this.getTileCoordExtent(n))}calculateTileRanges_(n){let r=this.resolutions_.length,e=new Array(r);for(let i=this.minZoom;i<r;++i)e[i]=this.getTileRangeForExtentAndZ(n,i);this.fullTileRanges_=e}},Dt=at;var ht=class extends Dt{constructor(n){super({extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes}),this.matrixIds_=n.matrixIds}getMatrixId(n){return this.matrixIds_[n]}getMatrixIds(){return this.matrixIds_}};function Ee(t,n,r){let e=[],i=[],o=[],s=[],u=[];r=r!==void 0?r:[];let f="SupportedCRS",c="TileMatrix",l="Identifier",a="ScaleDenominator",h="TopLeftCorner",p="TileWidth",y="TileHeight",_=t[f],M=d(_),Bt=M.getMetersPerUnit(),Ht=M.getAxisOrientation().substr(0,2)=="ne";return t[c].sort(function(m,U){return U[a]-m[a]}),t[c].forEach(function(m){let U;if(r.length>0?U=r.find(function(L){return m[l]==L[c]?!0:m[l].includes(":")?!1:t[l]+":"+m[l]===L[c]}):U=!0,U){i.push(m[l]);let L=m[a]*28e-5/Bt,V=m[p],gt=m[y];Ht?o.push([m[h][1],m[h][0]]):o.push(m[h]),e.push(L),s.push(V==gt?V:[V,gt]),u.push([m.MatrixWidth,m.MatrixHeight])}}),new ht({extent:n,origins:o,resolutions:e,matrixIds:i,tileSizes:s,sizes:u})}export{ee as a,ie as b,Z as c,b as d,Vn as e,on as f,kn as g,H as h,sn as i,Jn as j,nt as k,Kn as l,$r as m,Lt as n,Wt as o,Qr as p,te as q,ne as r,Xn as s,Rn as t,A as u,O as v,W as w,Mt as x,g as y,An as z,In as A,Un as B,On as C,Gn as D,_t as E,jt as F,St as G,D as H,F as I,$ as J,bn as K,Nn as L,zn as M,Zn as N,$t as O,Tt as P,Ln as Q,Pt as R,wt as S,tn as T,Wn as U,qn as V,nn as W,rn as X,Dn as Y,B as Z,Xt as _,E as $,tt as aa,Rt as ba,Bn as ca,en as da,Hn as ea,$n as fa,nr as ga,Ct as ha,rr as ia,er as ja,ir as ka,At as la,cn as ma,ln as na,d as oa,Tr as pa,It as qa,Pr as ra,wr as sa,Xr as ta,Rr as ua,st as va,Gt as wa,ut as xa,yr as ya,Yr as za,Cr as Aa,Fr as Ba,Ar as Ca,Ir as Da,Ur as Ea,pn as Fa,Br as Ga,zt as Ha,ct as Ia,Jr as Ja,dn as Ka,Kr as La,Nt as Ma,mn as Na,Nr as Oa,zr as Pa,Zr as Qa,Lr as Ra,Dt as Sa,Ee as Ta};
